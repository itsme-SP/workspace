/*
 * SPI_Tx_Only_Esp32.c
 *
 *  Created on: Aug 31, 2025
 *      Author: Shivaprasad
 */
#include <stdio.h>
#include "stm32f401xx.h"
#include "stm32f_gpio_driver.h"
#include "stm32f_spi_driver.h"
void GPIO_Config(){
	GPIO_HANDLE_t GPIOB_Handle;
	GPIOB_Handle.pGPIOx=GPIOB;
	GPIOB_Handle.GPIO_PINCONFIG.GPIO_PIN_NUMBER=GPIO_PIN_NO_13;
	GPIOB_Handle.GPIO_PINCONFIG.GPIO_OUTPUT_TYPE=GPIO_OP_TYPE_PP;
	GPIOB_Handle.GPIO_PINCONFIG.GPIO_PIN_MODE=GPIO_MODE_ALTFN;
	GPIOB_Handle.GPIO_PINCONFIG.GPIO_PIN_SPEED=GPIO_OP_HSP;
	GPIOB_Handle.GPIO_PINCONFIG.GPIO_PIN_ALT_FUNC_MODE=5;
	GPIOB_Handle.GPIO_PINCONFIG.GPIO_PULLUP_PULLDOWN=GPIO_PIN_NO_PUPD;
	GPIO_Init(&GPIOB_Handle);


}

void SPI_Config(){
	SPI_HANDLE_t SPI_Cnfg;
	SPI_Cnfg.pSPIx=SPI2;
	SPI_Cnfg.spi_config.SPI_dev_md=SPI_DEV_MASTER;
	SPI_Cnfg.spi_config.SPI_bus_cnfg=SPI_BUS_CONFIG_FD;
	SPI_Cnfg.spi_config.SPI_dff=SPI_DFF_8BITS;
	SPI_Cnfg.spi_config.SPI_CPHA=SPI_CPHA_LOW;
	SPI_Cnfg.spi_config.SPI_CPOL=SPI_CPOL_LOW;
	SPI_Cnfg.spi_config.SPI_speed=SPI_SCLK_DIV2;
	SPI_Cnfg.spi_config.SPI_ssm=SPI_SSM_DI;

	SPI_Init(&SPI_Cnfg);
}
int main(void){
	GPIO_Config();
	SPI_Config();
}
